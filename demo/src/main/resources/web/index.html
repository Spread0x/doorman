<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Doorman Demo App</title>
</head>
<body>
<script language="JavaScript">
const getUserInfo = async () => {
  const response = await fetch('/userinfo', {credentials: 'include'});
  const user = await response.json();
  document.getElementById("progress").innerHTML = ""
  document.getElementById("useruuid").innerHTML = "Hello, user. Your uuid is " + user.uuid + "."
  if( user["name"])
    document.getElementById("username").innerHTML = "Your name is " + myJson.uuid
  else
    document.getElementById("username").innerHTML = "We don't know your name";
  props = "";
  for(p in user.data) {
    props += p + "="  (user.data)[p]
  }
  if(props == "")
    document.getElementById("userdetails").innerHTML = "We have no data about you";
  else
    document.getElementById("userdetails").innerHTML = "All we know about you: " + props;


}

getUserInfo();

function login(provider) {
  window.location='/login/' + provider;
}


</script>
<div id="progress">Retrieving used info</div>
<div id="useruuid"></div>
<div id="username"></div>
<div id="userdetails"></div>

<br>
<div id="login">Login with
    <input id="login-provider" type=text value="google">
    <button  onclick="login(document.getElementById('login-provider').value)">Login</button>
</div>
<div id="refresh">Login with
    <button   onclick="getUserInfo()">Refresh user info</button>
</div>
</body>
</html>